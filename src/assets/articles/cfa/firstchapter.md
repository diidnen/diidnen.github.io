### 注重对基本概念的理解以及对相似概念的辨析
主要分为三个货币时间价值（公司估值和资产定价），数据分析与概率论，一元线性回归（两个宏观变量或金融变量之间有效的工具）
货币时间价值 利率->现值和终值
这个时候我们开始考虑利率
1.利率是什么（在考虑他说的当下1元的经济价值高于未来1元的经济价值的时候，我的第一反应是直觉，但其实直觉并不能给到什么，这个时候应该开始问问题经济价值是什么，简单来说就是钱或者直觉一点当下的1元买到的东西比未来多，这个时候就想到了通货膨胀但很显然我们考虑的情况不包括通货膨胀，这个时候就可以回到之前当下1元买到的东西更多，换句话说当下1元未来可能是1.6元，也就是induce到可以有利息）

以及在这个过程中我看了一个随机过程的东西，它里面的简化以及抓住重点（随机漫步高斯手中的，主要在于ok我们原先是有一个二维的运动，但是我们考虑这个运动他最有可能会在中间聚集，其实这个时候我们需要找到一个量来表达这个概念，无非就是x轴）

利率的三种理解
我现在1000元，未来要有1100元，
1.我们的要求回报率就是10%（required rate of return）
2.discount rate （折现未来现金流的利率）
3.opportunity cost 你也可以理解为如果现在花费这么一个1000元那么未来就有一个机会成本是1100元

利率是资金的价格，由资金供给和需求决定

利率=实际无风险利率（投资者对当前消费和未来消费的偏好）+预期通货膨胀率+（违约风险溢价（借款方（表达资产交易需要支付现金流的一方）到期无法按时按合约支付收益的风险/）+流动性风险溢价（不是指卖不出去的风险，而是指为了短期内迅速变现而被迫"低价出售"的风险？（为什么会出现这个））+期限风险溢价（距离到期支付本金的时间））（用来补偿投资者的风险投资）
simple interest rate
compounding interest

compounding interst rate -->stated annual interest rate/quoted interest rate(一年10% 记4次 一次2.5% 以及报价利率不是投资者1年内获得的真实利率收益 和ear区分一下) and effective annual rate（1+nominal interest rate/number of times of 复利）^(number of times)-1

present value and future value

年金 ordinary annuity and annuity due的区别就是是从第一年年末还是年初开始 ordinary 是从年末，第零期的年末就是第一期的年初，第3期的年初就是第二期的年末

永续年金的时间是每期期末

第二章 数据的整理可视化和描述

需要了解几种常见的数据处理和可视化的方法，而重点则是对数据特征的把我，包括中心趋势的测度指标，离散度额测度指标，数据分布的测度指标以及下行风险指标等

首先先定义变量 （可以度量，计算，和分类结果的量）
观测值

numervical data(continuous data and discrete data) vs categorical data(表述对象性质和特征的数据  nominal data（比如我们常说的分类不涉及排序） and ordinal data（这个涉及排序，就比如这个股票好不好 股票级别1，级别2）)
cross-sectional data（控制时间不变，多个观测对象） vs time-series data（控制对象不变，多个时间对象） vs panel data(就是把前面两个整合在一起)
structured data（以既定的高度规整有序且可复制的方式记录和储存的数据） vs Unstructured data（alternative data（个人，商业过程，传感器，就是没有整理））

将数据整理为 一维数据（一个变量改变）二维数据和panel data差不多

频率分布：将数据划分成k组，然后计算落在每族中的观测值数量（分为 absolute frequency（就是数量） and relative frequency(绝对频数指的数据数量占总数据的百分比)）小于某个区间上界的数据数量或数量占比称为 cumulative absolute frequency or cumulative relative frequency

对于一组数据，1.选择分组区间 2.频数 3.频率(relative frequency) 4.Cumulative relative Frequency(这一坨叫做 frequency distribution)

contingency table 
这里就相当于 行表示一个变量的所有情形，列表示另一变量的所有情形
如果要对两个变量进行独立性分析，一般先创建两个变量的列联表 然后再进行卡方检验

直方图（描述频率的竖着画的）和频数多边形（这个也是考虑范围）（频率的一个折现图）
条形图类似与直方图，条形图表示分类数据而不是数值型数据（就是直方图给的是数值范围，条形图是分类） 然后简单条形图和组合条形图区别只是简单条形图只care一个数据 而另一个有很多数据
树状图
词云
折线图 一般只能体现一种特征，bubble line chart用于在数据维度不止一维的时候
散点图 可以看出是否存在线性关系 如果要冲多个变量中找到那些有明显线性关系的变量，则需要用到散点图矩阵，两个变量之间绘制一个散点图，放在一起形成一个图矩阵。

热力图 用颜色图谱来显示不同类型数据量大小的一种数据可视化方法（整体来说我们要么是绘制点，要么是字大，要么是颜色，其实就是要用一个特征来凸显出到底哪一个变量重要）

以及我们要问说那么多可视化方法我具体要用哪一个，

考虑变量比较还是数据分布（频率（然后这里又分为两个一个是数值型数据（就是有取值范围）另一个是分类数据（条形图，树状图，热力图），词云））
变量比较一般分为时间维度和分类比较（时间维度 折线图和气泡折线图）
变量关系 散点图 散点图矩阵 热力图（存留一个问题：就是像这种统计图像是怎么被想出来的以及如何创新）


descriptive statistics vs inferential statistics

descriptive statistics focus on 如何将数据各方面的重要特征通过不同统计量有效地，全面地进行总结
inferential statistics focus on 通过抽样样本的特征对研究对象总体进行预测估计和判断
衡量总体数据特征的统计量称为parameter，衡量样本数据特征的统计量维样本统计量

算术平均 问题在于极端值 其实就几种方式来处理，如果极端值在可控范围内ok无所谓，排除极端值，以及对极端值进行重述和替代后（就相当于把一定范围内的极大值或极小值重述为某些特定值）
算数平均不适用于衡量多期的资产平均收益率

几何平均更平均

调和平均 小于等于 几何平均 小于等于 算术平均

货币加权收益率


在数据存在极端值的时候，中位数比算术平均数更能反映数据特征，但位数只利用了位于中间处的数据而忽视了数据中其他数据提供的信息

mode unimodal and bimodal and trimodal

仅仅了解数据的中心位置是不够的，我们也要考虑资产本身的风险，表现在资产偏离平均收益率的程度，

quartiles quintiles deciles and percentiles

L_y=$(n+1)\frac{y}{100}$

了解每一个变量代表的意义

range 控制了数据集的上下界
平均绝对离差 反应离散程度（但是绝对值函数在数学上不是很好处理，不是处处可导的函数）
处理负值（平方和取绝对值）
总体方差和样本方差（/n-1（自由度少一个））

但是我们的方差包含了上行风险和下行风险，但是我们更关心的是下行风险，
但是在这种情况下我们就不用均值，我们用一个目标值
就是也要考虑ok这个方法他有什么问题
对于绝对离散程度，因为我们只考虑的是距离，所以就会出现一支股票600元和一支股票3元的情况。那么600元的标准差大概率比股票3元的大，这个时候要引入一个相对离散程度（变异系数 $CV=\frac{s}{\bar{X}}$）

而且有可能随机变量的量纲可能不同，两者不具备可比性

变异系数是通过均值来衡量（这种感觉）
也可以把变异系数当作风险来考虑

变异系数是单位收益下的风险，那么换个角度来思考，夏普比率就是单位风险下的超额收益

仅靠均值和方差不足以全面衡量投资收益率的分布，这个时候我们要引入偏度的概念，用来反应数据分布的对称性

Sample Skewness (存疑 为什么是三次方？？？这里是under assumption大样本n>=100（猜测是基于中心极限定理）)

基于概率分布我们来描述这么一个左偏和右偏（其实就是说我们的极限值往哪一边偏离更多，就是什么偏）Negative or left-skewed means the tail is more pronounced on the left rather than the right

那么这么一说就很好理解了对于一个左偏分布，极限值更多的是在左边，那么平均值就会更往左边

下一个我们考虑峰度，kurtosis

skewness衡量的是尾部的长度，峰度更多衡量尾部的厚度(为什么变成4次方了？？？)

kurtosis其实更多的是描述尾部（异常值）而不是所谓的峰的高度或者陡峭成都

峰度反应的是尾部是否比正态分布更重还是更轻，高峰度意味着尾部较重，也就是分布种有更多的极端值或离群值（相比于skewness，skewness更多的描述极端值的偏向方向）

然后我们四次方这就会让接近均值的点被四次方过后数值很小，对峰度的影响并不大
也可以考虑峰度的上下界和skewness的关系（4次方消除了符号差异）

然后我们考虑正态分布，他的峰度为3，那么我们定义超峰度 为kurt[X]-3,那么如果超峰度大于0，说明比正态分布尾部更重，峰值就更尖，

独立变量之和的峰度 会稀释峰度，
峰度在变量叠加时会被分散，整体分布趋近于正态分布（记得补一下正态分布，中心极限定理）

极端值越多，峰值越大

尖峰态 leptokurtic more peak and fat tail

平峰 mesokurtic

低峰态 platykurtic less peak and thin tail




概率论

研究随机现象规律的学科，帕斯卡赌注分配问题的思考，中心极限定理，大数定律，测度论，

random variable就是我们概率论要研究随机现象，为了方便研究我们把随机现象定为一个变量，叫做random variable，一般用一个大写字母来表示

event就是随机变量的部分结果组成的集合


mutually exclusive events 一组不可能同时发生的事件称为互斥事件

independent events f如果一个事件的发生不会影响到另一个事件的发生（就是我们有足够的信息可以进行判定）

互斥事件不独立（可以理解为ok，A和B两个事件，事件A是否发生实际上为判断B事件提供了信息，因此就不会是独立事件）

遍历事件
一组包含随机变量中的所有可能结果的事件称为遍历事件
概率的定义

有点像sigma algebra的定义 就是一个measurable function把一个world（事件）映射到概率的函数，以及满足事件概率（image）是[0-1]，然后对于互斥且是遍历事件的概率和为1（其实就是sigma algebra）

经验概率（大量客观规律事件），先验概率（通过逻辑分析），主观概率(数据量小)

在经济金融中，概率一般是通过赔率给出的

比如啊事件E发生的赔率= P(E)/(1-P(E))

事件E不发生的赔率就是赔率的倒数

条件概率：在已知事件B发生的情况下，事件A发生的概率
（概率还是要回到样本空间，这里我们说事件B发生，其实就是原本的样本空间发生了变化，事件B的发生为判断事件A发生的概率提出了一些样本点）

独立事件P(A|B)=P(A)

Joint Probability:
P(AB)=P(A|B)*P(B)
乘法法则

加法法则
P(A or B)= P(A)+P(B)-P(AB)

全概率公式

通常一事件可能会非常复杂，直接去求该事件的概率可能会无从下手。通过全概率公式，就可以把复杂的事件拆分为简单事件然后再求他的概率（个人感觉就相当于因为我们把这个B的概率放在了A的概率的下面增加了信息（分类讨论），可能就会更好计算）（这里面所有的A事件互斥且遍历）（就是基于什么样的condition在考虑这么一个概率）

贝叶斯公式
P(A|B)=P(B|A)/P(B)*P(A)

P(A) is prior probability
P(A|B) is called updated probability

P(B)用全概率公式来计算

期望值（没啥写的）（就是我们考虑算术平均，这个是等概率但是我们的随机变量不一定是等概率，所以就induce期望值）

随机变量的方差就是 E[X-E(X)]^2

协方差：了解两个随机变量之间的联动关系，感觉这个定义有点抽象





收益率联动性

如果两个资产收益率是正相关的，那么当资产i收益率大于其均值时，资产j的收益率也倾向于大于其均值，协方差为正数，

相关系数为0只能说明变量之间不存在线性关系，但变量之间可能存在非线性关系

所以我们如果想要表达资产联动性那么我们还要除以他的方差（来消除量纲导致的影响）


常见概率分布
概率分布用来刻画随机变量所有可能结果对应的概率

首先先对随机变量进行分类 分为离散型随机变量和连续性随机变量，当我们阐述说随机变量的取值的可能结果时可数的，那么我们称这个二东西为离散型随机变量
概率为0的事件并不意味着该事件绝对不会发生
在研究一些问题时，如果取到的最小单位还挺小，我们也可以把离散随机变量看作连续随机变量

概率密度函数pdf

cdf 累计分布函数是有界的
离散型随机变量的累计分布函数呈现出阶梯状


离散均匀分布：随机变量的每个取值对应的概率是相等的

连续均匀分布，离散均匀分布是指随机变量每一取值的概率相等

伯努利分布成功和失败可以定义也就是比如啊我们定义投掷色子出来的点数为1是成功的，投掷出来其他的就是失败的

这就会是一个二项分布 1.不同次实验是相互独立的 2.每次试验的成功率为常数p




正态分布
1.正态分布的pdf完全可由均值和方差刻画（其他的也可以刻画吗）
2.在均值附近取值的概率较大，而取极大值或极小值的概率较小
3.正态分布的偏度为0，峰度为3
4.服从正态分布且相互独立的随机变量的线性组合仍然服从正态分布。如果随机变量X与随机变量Y服从正态分布，那么aX+bY也服从正态分布

标准差倍数 1 概率 68%
          1.65 概率90%
          1.96 概率95%
          2.58 概率99%

亏空风险
首先我们假设资产收益率服从正态分布，那么收益率的方差就衡量了资产收益率变动的风险

亏空风险是指资产收益率在一段时期内低于最低可接受水平R(minimum acceptable level)的概率，注意亏空风险是一个概率，

罗伊安全第一比例
SF ratio=(资产p收益率的均值-minimum accepatable level)/标准差

对数正态分布：lnX服从正态分布，那么随机变量X服从对数正态分布
1.对数正态分布的概率密度函数是非负
2.对数正态分布的概率密度函数是正偏的
3.对数正态分布是用来衡量资产价格，而正态分布主要是用来衡量收益率

如果X服从正态分布，e^X服从对数正态分布。

学生t分布

当样本容量较小，实验数据并不服从正态分布，其概率分布形状与正态分布类似但尾部更厚
t分布的概率密度函数可以由一个参数，自由度完全刻画（？？）
t分布的概率密度函数也是一条钟形曲线，左右对称，但尾部比正态分布更厚（偏度=0，峰度>3）（？？？）
当t分布的自由度增加并趋近于无穷大时，t分布的概率密度函数会无限趋近于标准正态分布的概率密度函数（？？？）

无需了解t分布概率密度函数，只需知道其有且仅有一个参数自由度，尖峰肥尾是鉴于方差相同

chi-square distrition，它的概率密度函数是非对称的图形。自由度是k的卡方分布是k个服从独立标准正态分布的随机变量的平方和的分布，因此，卡方分布不取负值，卡方分布的自由度是n-1

F分布是一个以0为界的非对称分布。每一个F分布由两个自由度定义，称为分子和分母自由度

同时当自由度增大时，卡方分布和F分布的概率密度函数图形都会更加趋近于钟形（后验分布，皮尔逊IV型分布）

多元分布：
目前我们介绍的分布都是一元分布（一个随机变量的概率分布），基金经理在进行资产配置时，往往需要涉及多种资产，用于衡量一组随机变量的概率分布（并不是简单地将每个随机变量的一元概率密度分布相乘，还必须考虑到随机变量之间的相关性）
如果我们要描述多元正态分布只需知道三类参数（资产组合中每个资产收益率的均值，方差，不同资产之间的相关系数，假设资产组合共有n个资产，那么需要知道的相关系数个数为: n(n-1)/2）
（罗斯福新政）


蒙特卡洛模拟:假定与资产组合相关的各风险因子服从特定的概率分布，根据这些假定的概率分布进行抽象。随后依据抽象数据计算资产最终价值。反反复复上诉步骤N次，可求得最终价值，从而形成资产最终价值的概率分布。

蒙特卡洛模拟缺点
1.蒙特卡洛模拟相当复杂，当模拟次数N非常大时，很慢
2.由于蒙特卡洛模拟准确性极其依赖于假设分布。如果对风险因子服从的分布假设不准确，就不太好

抽样与估计

描述性统计学和推断性统计学
我们通过分析抽样样本的特征来推断总体的特征 这就涉及两个问题 怎么选样，以及怎么分析和推断 对于如何抽样，那么我们需要考虑的时抽样过后造成的误差以及抽样方法的选择（尽可能反应总体的真实分布），关于抽样分析，有点估计和区间估计

用于衡量总体特征的统计量称为parameter
由样本数据计算出来的平均身高称为sample statistic 并以此对总体参数进行估计

probability samples(赋予每个个体相同的被抽中的概率), non-probability samples(会考虑处概率以外的其他因素)
simple random sampling
stratified random sampling（分层抽样）
convenience sampling
judgmental sampling
抽样分布是指样本统计量的概率分布 样本统计量是一个随机变量，存在概率分布，就是抽样分布
样本容量是指一次抽样中调查对象的个数
抽样调查必然设计如何确定样本容量的问题，大样本好处在于 样本容量越大，抽样估计出来的样本统计量自然越接近总体参数。大样本也存在缺点（成本，如果大样本来自不同总体，那么大样本无助于提升估计参数的准确性）（样本抽样是要从同一个主体）
抽样偏差（显著性水平）
data-snooping bias(要避免数据挖掘偏差就必须注意挖掘出来的结论背后是否有经济理论支持，只在统计学上显著的结论不能推广到一般情形，就算显著也不一定能够赚钱)
survivorship bias
look-ahead bias


中心极限定理（为置信区间的构建与假设检验奠定了理论基础，样本均值X是一个随机变量，因而也存在概率分布，中心极限定理就是对均值的概率分布进行了描述）（数学证明解决）

中心极限定理的条件 抽样必须是简单随机抽样
总体的均值与方差均有先
样本容量超过30
样本统计量服从正态分布
方差为总体方差/n（数学证明）

confidence interval estimate
点估计给出了总体参数的一个具体估计数值，但是并没有回答这个数值的估计精度，这个时候我们要引入区间估计
confidence interval 95%==5% significance level

hypothesis testing
在统计学意义上判断假设是否成立
小概率事件不会发生
null hypothesis/alternative hypothesis
cannot rejecti(不是accept) and reject 
如果假设涉及不等式 一般是习惯放在null
一般习惯把结论放在alternative hypothesis
p值是指拒绝原假设的最小显著性水平
检验统计量一般情况下是符合某种distribution 然后我们依据这个distribution来看是否拒绝
原假设正确，但是拒绝了原假设这个叫type1(发生这个的概率我们一般设为significance level)错误地拒绝了原假设
原假设不正确，却接受的原假设 这个叫type2（发生这个的概率是power of test）
多重测试会导致检验可信度降低，因为5%的显著性水平，如果有100次那么就会出现5次type1 error，那么这个时候我们就要提升我们的标准，让
这个分布图就相当于我们的中心是我们要检验值，而这个分布就是我们算出的值的分布，然后我们不能让我们算出的值太偏离这个检验值，如果太偏离就说明在拒绝域里面，相当于这个时候就会introduce一个显著性水平，描述说我们的小概率事件，多重测试就相当于我们要测试多个药是否对某种疾病有影响，然后因为我们测试的次数越多，其实就更有可能（与控制假阳性不同，控制FDR允许少量假阳性存在，但控制在一个较低的比例内，从而在减少假阳性的同时，保留更多真正显著的结果。假设你进行多次假设检验，每个检验都独立，且显著性水平设置为0.05。

如果你做100次检验，即使所有原假设都为真，也会有约5次“偶然显著”（假阳性）。
多次检验后，这个假阳性的比例会不断累积，导致：

你可能误认为无效的药物或基因有效（假阳性）。
真实显著的结果被假阳性掩盖，难以分辨。）
当进行假设检验并确定临界值时,这些值是基于只运行一次检验的前提。在对数据进行多次检验时会发生数据挖掘的风险,导致有误导性的结果。
假阳性累积：每做一次假设检验，都会有一定的几率犯假阳性错误。当检验次数增多时，假阳性的机会也随之增加，导致原本无效的结果被误判为显著。
“数据挖掘”：如果没有控制假阳性的风险，你可能会在多次检验中发现一些“偶然”的关系或规律，但这些关系并不代表真正的效应，只是数据中的噪声。这种现象就是数据挖掘的风险。

正态总体的假设检验：
先回到confindence interval
95%confidence interval means 基于抽样数据构造的置信区间有95%的概率包含总体均值


statistical significance.()
Economic significance.


t 分布 通过“拉宽尾部”（即增加尾部的厚度），让分布更加“分散”，从而对这种不确定性进行补偿。


夏普比率：
（投资组合预期年化报酬率-年化无风险利率）/投资组合年化报酬率的标准差（1、用标准差对收益进行风险调整，其隐含的假设就是所考察的组合构成了投资者投资的全部。因此只有在考虑在众多的基金中选择购买某一只基金时，夏普比率才能够作为一项重要的依据；
2、使用标准差作为风险指标也被人们认为不很合适的。
3、夏普比率的有效性还依赖于可以以相同的无风险利率借贷的假设；
4、夏普比率没有基准点，因此其大小本身没有意义，只有在与其他组合的比较中才有价值；
5、夏普比率是线性的，但在有效前沿上，风险与收益之间的变换并不是线性的。因此，夏普指数在对标准差较大的基金的绩效衡量上存在偏误；
6、夏普比率未考虑组合之间的相关性，因此纯粹依据夏普值的大小构建组合存在很大问题；
7、夏普比率与其他很多指标一样，衡量的是基金的历史表现，因此并不能简单地依据基金的历史表现进行未来操作。
8、计算上，夏普指数同样存在一个稳定性问题：夏普指数的计算结果与时间跨度和收益计算的时间间隔的选取有关。
尽管夏普比率存在上述诸多限制和问题，但它仍以其计算上的简便性和不需要过多的假设条件而在实践中获得了广泛的运用。
基金较高的净值增长率可能是在承受较高风险的情况下取得的，因此仅仅根据净值增长率来评价基金的业绩表现并不全面，衡量基金表现必须兼顾收益和风险两个方面，夏普比率就是一个可以同时对收益与风险加以综合考虑的指标。夏普比率又被称为夏普指数，由诺贝尔奖获得者威廉·夏普于1966年最早提出，已成为国际上用以衡量基金绩效表现的最为常用的一个标准化指标。 [2]）

年化无风险利率可以是国债回报

夏普比率用来衡量增加回报与风险的比例

公式

一元线性回归

分析两个宏观或金融变量之间的关系

我们分为两种关系，函数关系，相关关系，而相关关系无法用确定的函数解析式表达，那么这个时候我们引入一元线性回归。

偏最小二乘法
最小二乘法
b_1 含义是因变量Y对自变量X的敏感度

用一元线性回归模型分析因变量Y和自变量X的关系

假设一：因变量Y和自变量X关于回归系数是线性的
我们希望回归模型种残差项是随机的
假设二：同方差性（所有观测值的残差项的方差都相同）
假设三：残差项相互独立 如果观测值之间存在相关性，残差项之间也不独立，要求残差项之间相互独立，是为了正确估计样本回归系数的方差，
假设四：残差项服从正态分布（服从正态分布是为了便于对线性回归方程进行相关的假设检验）。当样本容量足够大时，根据中心极限定理



